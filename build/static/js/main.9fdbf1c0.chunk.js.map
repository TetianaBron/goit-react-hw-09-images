{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Layout/Layout.module.css","components/ImageGallery/ImageGallery.module.css","components/Spinner/Spinner.module.css","components/Layout/Layout.js","components/Searchbar/Searchbar.js","images/No_Image-512.webp","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Spinner/Spinner.js","services/pixabay-api.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Layout","children","className","s","layout","Searchbar","state","query","handleQueryChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","this","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","name","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","webformatURL","tags","clickOnItem","src","Img","alt","onClick","ImageGalleryItemImage","defaultProps","Button","onIncrement","ButtonSection","Spinner","Loader","color","height","width","timeout","api","fetchImg","page","perPage","fetch","then","response","json","modalRoot","document","querySelector","Modal","isLoading","handleKeyDown","e","code","onClose","handleBackdropClick","target","onLoad","window","addEventListener","removeEventListener","image","createPortal","Overlay","SpinnerCentered","ImageGallery","items","total","loading","showModal","largeImage","pixabayAPI","prevState","hits","catch","message","finally","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","handleButtonClick","handleGalleryItemClick","prevProps","numberOfPages","length","map","index","largeImageURL","App","handleFormSubmit","ReactDOM","render"],"mappings":"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","file":"static/js/main.9fdbf1c0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__25R6g\",\"Modal\":\"Modal_Modal__1T4c0\",\"SpinnerCentered\":\"Modal_SpinnerCentered__3aqqN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1Mgc0\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__r-u2j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3Ev6u\",\"ButtonSection\":\"Button_ButtonSection__3nuQt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Layout_layout__2N9dn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__34PfI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Spinner_Loader__2ftXq\"};","import React from 'react';\nimport s from './Layout.module.css';\n\nconst Layout = ({ children }) =>\n    <div className={s.layout}>{children}</div>;\n\nexport default Layout;","import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { toast } from 'react-toastify';\r\nimport s from './Searchbar.module.css';\r\n\r\n\r\nexport default class Searchbar extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func,\r\n  };\r\n  \r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleQueryChange = event => {\r\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    if (this.state.query.trim() === '') {\r\n      toast.error(\"Введите что-то.\");\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form onSubmit={this.handleSubmit} className={s.SearchForm}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n            </button>\r\n\r\n              <input\r\n                 className={s.SearchFormInput}\r\n                 type=\"text\"\r\n                 name=\"query\"\r\n                 value={this.state.query}\r\n                 onChange={this.handleQueryChange}\r\n                 autoComplete=\"off\"\r\n                 autoFocus\r\n                 placeholder=\"Search pictures from Pixabay...\"\r\n              />\r\n           </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/No_Image-512.6bca87e4.webp\";","import s from './ImageGalleryItem.module.css';\r\nimport PropTypes from 'prop-types';\r\nimport Img from '../../images/No_Image-512.webp';\r\n\r\nconst ImageGalleryItem = ({ webformatURL, tags, clickOnItem }) => (\r\n    <div className={s.ImageGalleryItem}>\r\n        <img\r\n            src={webformatURL ?  webformatURL : Img}\r\n            alt={tags}\r\n            onClick={clickOnItem}\r\n            className={s.ImageGalleryItemImage} />\r\n    </div>\r\n)\r\n\r\nImageGalleryItem.defaultProps = {\r\n  webformatURL: Img,\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n    webformatURL: PropTypes.string,\r\n    tags: PropTypes.string.isRequired,\r\n    clickOnItem: PropTypes.func,\r\n};\r\n\r\nexport default ImageGalleryItem;","import s from './Button.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Button = ({ onIncrement }) => (\r\n    <div className={s.ButtonSection}>\r\n        <button type=\"button\" onClick={onIncrement} className={s.Button}>Load more</button>\r\n    </div>\r\n)\r\n\r\nButton.propTypes = {\r\n    onIncrement: PropTypes.func,\r\n};\r\n\r\nexport default Button;","import React from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport s from './Spinner.module.css';\r\n\r\nconst Spinner = () => (\r\n     <div className={s.Loader}>\r\n        <Loader\r\n            type=\"ThreeDots\"\r\n            color=\"#3f51b5\"\r\n            height={80}\r\n            width={80}\r\n            timeout={3000}\r\n        />\r\n     </div>\r\n);\r\n\r\nexport default Spinner;","function fetchImg(query, page, perPage) {\r\n  const BASE_URL = 'https://pixabay.com/api';\r\n  const KEY = '19207978-b8cc5d5178f1c84e5ac39b1c7';\r\n  \r\n    return fetch(`${BASE_URL}/?q=${query}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=${perPage}`)\r\n    .then(response => response.json())\r\n}\r\n\r\nconst api = {\r\n  fetchImg,\r\n};\r\n\r\nexport default api;","import React, { Component } from 'react';\r\nimport s from './Modal.module.css';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from \"prop-types\";\r\nimport Spinner from '../Spinner/Spinner';\r\nimport Img from '../../images/No_Image-512.webp';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n    static propTypes = {\r\n        image: PropTypes.object,\r\n        onClose: PropTypes.func,\r\n    };\r\n\r\n    state = {   \r\n        isLoading: true,\r\n    }; \r\n\r\n    componentDidMount() {\r\n        window.addEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        window.removeEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n        this.props.onClose();\r\n        }\r\n    }\r\n\r\n    handleBackdropClick = e => {\r\n        if (e.currentTarget === e.target) {\r\n            this.props.onClose();\r\n        }\r\n    }\r\n    onLoad = () => {\r\n        this.setState({ isLoading: false });\r\n    }\r\n\r\n    render() {\r\n        const { src, alt } = this.props.image;\r\n        const { isLoading } = this.state;\r\n        \r\n        return createPortal(\r\n            <>\r\n            <div className={s.Overlay} onClick={this.handleBackdropClick}>\r\n                <div className={s.Modal}>\r\n                         \r\n                        {isLoading && (\r\n                            <div className={s.SpinnerCentered}>\r\n                                <Spinner />\r\n                            </div>)}\r\n                        \r\n                    <img\r\n                        onLoad={this.onLoad}\r\n                        src={src ? src : Img}\r\n                        alt={alt} />\r\n                </div>\r\n            </div>\r\n            </>,\r\n            modalRoot);\r\n    }\r\n}\r\n","import { Component } from 'react';\r\nimport s from './ImageGallery.module.css';\r\nimport { toast } from 'react-toastify';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport Button from '../Button/Button';\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Spinner from '../Spinner/Spinner';\r\nimport pixabayAPI from '../../services/pixabay-api';\r\nimport Modal from '../Modal/Modal';\r\n\r\nconst perPage = 12;\r\n\r\nexport default class ImageGallery extends Component {\r\n    static propTypes = {\r\n    query: PropTypes.string.isRequired,\r\n    };\r\n    \r\n    state = {\r\n        items: [],\r\n        total: null,\r\n        error: null,\r\n        loading: false,\r\n        page: 1,\r\n        showModal: false,\r\n\r\n        largeImage: {\r\n            src: \"\",\r\n            alt: \"\",\r\n        },\r\n    };\r\n    \r\n    async componentDidUpdate(prevProps) {\r\n        if (prevProps.query !== this.props.query ) {\r\n            await this.setState({ items: [], page: 1 });\r\n            this.fetch(this.props.query);\r\n       }\r\n    }\r\n  \r\n   \r\n\r\n    fetch = (query) => {\r\n        this.setState({ loading: true });\r\n\r\n        pixabayAPI\r\n            .fetchImg(query, this.state.page, perPage)\r\n            .then((items) => {\r\n                if (items.total === 0) {\r\n                    toast.error(`${query} is not found. Try another one!`);\r\n                } else if (this.state.page === 1) {\r\n                    toast.error(`${items.total} pictures is found.`)\r\n                }\r\n                this.setState(prevState => ({\r\n                    items: [...prevState.items, ...items.hits],\r\n                    total: items.total,\r\n                    page: prevState.page + 1,\r\n                }))\r\n            })\r\n            .catch(error => {\r\n                 toast.error(error.message);\r\n                 this.setState({ error: error.message });\r\n            })\r\n         .finally(() => {\r\n             this.setState({ loading: false });\r\n             window.scrollTo({\r\n                 top: document.documentElement.scrollHeight,\r\n                 behavior: 'smooth',\r\n            });\r\n         });\r\n    }\r\n    \r\n    toggleModal = () => {\r\n        this.setState(({showModal}) => ({\r\n            showModal: !showModal\r\n        }))\r\n    }\r\n\r\n    handleButtonClick = () => {\r\n        this.fetch(this.props.query);\r\n    }\r\n    \r\n    handleGalleryItemClick = (src, alt) => {\r\n            this.setState({\r\n                largeImage: { src, alt },\r\n            });\r\n            this.toggleModal();\r\n    }\r\n\r\n    render() {\r\n        const { items, showModal, loading, largeImage, page, total } = this.state;\r\n        const numberOfPages = total / perPage;\r\n \r\n        return (\r\n        <>\r\n            {items.length > 0 &&\r\n                (<ul className={s.ImageGallery}>\r\n                {items.map(({ webformatURL, largeImageURL, tags }, index) => (\r\n                        <li key={index}>\r\n                          <ImageGalleryItem\r\n                              webformatURL={webformatURL}\r\n                              largeImageURL={largeImageURL}\r\n                              tags={tags}\r\n                              clickOnItem={() => this.handleGalleryItemClick(largeImageURL, tags)} />\r\n                        </li>))}\r\n                    </ul>)}\r\n                \r\n            {loading && <Spinner/>}\r\n                                \r\n            {showModal &&\r\n                (<Modal\r\n                        image={largeImage}\r\n                        onClose={this.toggleModal}\r\n                    />)}\r\n                            \r\n            {page - 1 < numberOfPages && !loading && (<Button onIncrement={() => this.handleButtonClick()} />)}\r\n        </>\r\n        )    \r\n    }\r\n}\r\n            \r\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Layout from './components/Layout/Layout';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\n\nexport default class App extends Component {\n\n    state = {\n        query: '',\n    };\n\n    handleFormSubmit = query => {\n        this.setState({ query });\n    };\n\n    render() {\n        \n        return ( \n            <Layout>\n                <Searchbar onSubmit={this.handleFormSubmit} />\n                <ImageGallery query={this.state.query} />\n                <ToastContainer/>\n            </Layout>\n        );\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport  './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n    <App />, document.querySelector('#root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__ZNzXf\",\"SearchForm\":\"Searchbar_SearchForm__3WhZq\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1Jm4J\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__JT9Mo\",\"SearchFormInput\":\"Searchbar_SearchFormInput__19Z_n\"};"],"sourceRoot":""}